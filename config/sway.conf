# Config for sway
# Read `man 5 sway` for a complete reference.

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:monospace, FontAwesome, 9

### Variables
# Logo key. Use Mod1 for Alt.
set $mod Mod4

# Home row direction keys, like vim
set $left h
set $down j
set $up k
set $right l

# Your preferred terminal emulator
set $term gnome-terminal

# Your preferred application launcher
# Note: it's recommended that you pass the final command to sway
set $menu rofi -combi-modi window#drun -show combi -modi combi -show-icons

### Output configuration (man 5 sway-output / swaymsg -t get_output)
output eDP-1 pos 0 0 res 1920x1080
output DP-4 pos 1920 0 res 1920x1080
output DP-5 pos 3840 0 res 1920x1080

output "*" background /usr/share/backgrounds/f29/default/tv-wide/f29.png fit

### Idle configuration
# Lock your screen after 300 seconds of inactivity, then turn off
# displays after another 300 seconds, and turn screens back on when
# resumed. It will also lock the screen before your computer goes to sleep.
exec swayidle -w \
         timeout 300 '~/bin/lock-sway' \
         timeout 600 'swaymsg "output * dpms off"' \
              resume 'swaymsg "output * dpms on"' \
         before-sleep '~/bin/lock-sway'

### Input configuration (man 5 sway-input / swaymsg -t get_inputs)
input "1:1:AT_Translated_Set_2_keyboard" {
        xkb_layout de
}

input "1739:0:Synaptics_TM3053-003" {
        tap enabled
        natural_scroll enabled
        pointer_accel 0.3
        accel_profile adaptive
        dwt enabled
}

input "1118:219:Microsoft_Natural®_Ergonomic_Keyboard_4000" {
        xkb_layout de
}

input "1133:45081:MX_Master_2S_Mouse" {
        natural_scroll enabled
}

### Visuals
    # Gaps between containers
    gaps inner 14

    # Gaps between screen edges and containers
    #gaps outer 5
    #gaps horizontal 100
    #gaps vertical 500

    # Create only gaps if more then one container
    #smart_gaps on

    #new_float none
    new_window pixel 0

    default_border pixel 2

    # Define names for workspaces
    set $ws1    "1:   Mail "
    set $ws2    "2:   Terminal "
    set $ws3    "3:   Firefox "
    set $ws4    "4:   Code "
    set $ws5    "5:   Files "
    set $ws6    "6:   Media "
    set $ws7    "7:   Design "
    set $ws8    "8:   Chat "
    set $ws9    "9:   General "
    set $ws10   "10:   Settings "

    # assign program to workspace
    assign [class="Firefox"] → $ws3
    assign [class="Thunderbird"] → $ws1
    assign [class="libreoffice"] → $ws5

    # assign workspace to monitor
    workspace $ws1 output eDP-1
    workspace $ws2 output DP-4
    workspace $ws3 output DP-5

    # class                 border  backgr. text    indicator child_border
    client.focused          #2b83a6 #2b83a6 #ffffff #dddddd   #2b83a6
    client.focused_inactive #212121 #212121 #86888c #292d2e   #5a5a5a
    client.unfocused        #212121 #212121 #86888c #292d2e   #5a5a5a
    client.urgent           #d64e4e #d64e4e #ffffff #d64e4e   #d64e4e
    client.placeholder      #212121 #0c0c0c #ffffff #212121   #262626
    client.background       #212121

    # Display Yad as floating. Find out class with xprop
    for_window [app_id="Yad"] floating enable
    for_window [class="KeePass2"] floating enable
    for_window [app_id="nm-connection-editor"] floating enable
    for_window [class = "Thunderbird"] layout tabbed

### Key bindings
# Basics
    # start a terminal
    bindsym $mod+Return exec $term

    # kill focused window
    bindsym $mod+Shift+q kill

    # start your launcher
    bindsym $mod+d exec $menu

    # Drag floating windows by holding down $mod and left mouse button.
    # Resize them with right mouse button + $mod.
    # Despite the name, also works for non-floating windows.
    # Change normal to inverse to use left mouse button for resizing and right
    # mouse button for dragging.
    floating_modifier $mod normal

    # reload the configuration file
    bindsym $mod+Shift+c reload

    # Create Log out, Reboot, Poweroff bindings
    set $lockModeName "Exit (L)ock, (R)eboot, (P)oweroff, (E)xit"
    mode $lockModeName {
        bindsym $mod+Shift+r exec systemctl reboot
        bindsym $mod+Shift+l mode "default"; exec ~/bin/lock-sway
        bindsym $mod+Shift+e exec swaymsg exit
        bindsym $mod+Shift+p exec systemctl poweroff

        # back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
    }
    bindsym $mod+Shift+e mode $lockModeName

# Lock Screen
bindsym $mod+l exec ~/bin/lock-sway

# Moving around
    # Move your focus around
#    bindsym $mod+$left focus left
#    bindsym $mod+$down focus down
#    bindsym $mod+$up focus up
#    bindsym $mod+$right focus right
    # or use $mod+[up|down|left|right]
    bindsym $mod+Left focus left
    bindsym $mod+Down focus down
    bindsym $mod+Up focus up
    bindsym $mod+Right focus right

    # _move_ the focused window with the same, but add Shift
#    bindsym $mod+Shift+$left move left
#    bindsym $mod+Shift+$down move down
#    bindsym $mod+Shift+$up move up
#    bindsym $mod+Shift+$right move right
    # ditto, with arrow keys
    bindsym $mod+Shift+Left move left
    bindsym $mod+Shift+Down move down
    bindsym $mod+Shift+Up move up
    bindsym $mod+Shift+Right move right

# Workspaces
    # switch to workspace
    bindsym $mod+1 workspace $ws1
    bindsym $mod+2 workspace $ws2
    bindsym $mod+3 workspace $ws3
    bindsym $mod+4 workspace $ws4
    bindsym $mod+5 workspace $ws5
    bindsym $mod+6 workspace $ws6
    bindsym $mod+7 workspace $ws7
    bindsym $mod+8 workspace $ws8
    bindsym $mod+9 workspace $ws9
    bindsym $mod+0 workspace $ws10
    # move focused container to workspace
    bindsym $mod+Shift+1 move container to workspace $ws1
    bindsym $mod+Shift+2 move container to workspace $ws2
    bindsym $mod+Shift+3 move container to workspace $ws3
    bindsym $mod+Shift+4 move container to workspace $ws4
    bindsym $mod+Shift+5 move container to workspace $ws5
    bindsym $mod+Shift+6 move container to workspace $ws6
    bindsym $mod+Shift+7 move container to workspace $ws7
    bindsym $mod+Shift+8 move container to workspace $ws8
    bindsym $mod+Shift+9 move container to workspace $ws9
    bindsym $mod+Shift+0 move container to workspace $ws10

    # Move Workspace to other monitor
    bindsym $mod+Mod1+Left move workspace to output left
    bindsym $mod+Mod1+Right move workspace to output right

# Layout stuff
    # You can "split" the current object of your focus with
    # $mod+b or $mod+v, for horizontal and vertical splits
    # respectively.
    bindsym $mod+h splith
    bindsym $mod+v splitv

    # Switch the current container between different layout styles
    bindsym $mod+s layout stacking
    bindsym $mod+w layout tabbed
    bindsym $mod+e layout toggle split

    # Make the current focus fullscreen
    bindsym $mod+f fullscreen

    # Toggle the current focus between tiling and floating mode
    bindsym $mod+Shift+space floating toggle

    # Swap focus between the tiling area and the floating area
    bindsym $mod+space focus mode_toggle

    # move focus to the parent container
    bindsym $mod+a focus parent

# Scratchpad
    # Move window to scratchpad
    bindsym $mod+Shift+BackSpace move scratchpad
    # Cycle through windows in scratchpad
    bindsym $mod+u scratchpad show
    # Show specific window in scratchpad via WM_CLASS; find out with xprop
    bindsym $mod+k [class="KeePass2"] scratchpad show

# Screen brightness
    bindsym XF86MonBrightnessUp exec light -A 5
    bindsym XF86MonBrightnessDown exec light -U 5
# Volume Keys
    bindsym XF86AudioRaiseVolume exec pactl set-sink-volume $(pacmd list-sinks |awk '/* index:/{print $3}') +5%
    bindsym XF86AudioLowerVolume exec pactl set-sink-volume $(pacmd list-sinks |awk '/* index:/{print $3}') -5%
    bindsym XF86AudioMute exec pactl set-sink-mute $(pacmd list-sinks |awk '/* index:/{print $3}') toggle

# Screenshot
    bindsym $mod+Shift+s exec grim -g "$(slurp)" $(xdg-user-dir PICTURES)/$(date +'%Y-%m-%d-%H%M%S_grim.png')

# Resizing containers
mode "resize" {
    # left will shrink the containers width
    # right will grow the containers width
    # up will shrink the containers height
    # down will grow the containers height
#    bindsym $left resize shrink width 10px
#    bindsym $down resize grow height 10px
#    bindsym $up resize shrink height 10px
#    bindsym $right resize grow width 10px

    # ditto, with arrow keys
    bindsym Left resize shrink width 10px
    bindsym Down resize grow height 10px
    bindsym Up resize shrink height 10px
    bindsym Right resize grow width 10px

    # return to default mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

# Status bar (man 5 sway-bar)
bar {
        position top
        status_command SCRIPT_DIR=~/bin/blocks i3blocks -c ~/bin/blocks/i3blocks.conf
        workspace_buttons yes
        #strip_workspace_numbers yes
        separator_symbol " | "
#        colors {
          #background  #2121216f
#          background  #212121
#          statusline  #dddddd
#          separator   #666666
          # class             border  backgr. text
#          focused_workspace   #2b83a6 #2b83a6 #ffffff
#          active_workspace    #212121 #212121 #ffffff
#          inactive_workspace  #212121 #212121 #86888c
#          urgent_workspace    #d64e4e #d64e4e #ffffff
#          binding_mode #229c56 #229c56 #ffffff
#        }

colors {
  background #2b303b6f
  statusline #dddddd
  separator #ffffff
  # class             border    backgr.   text
  focused_workspace   #ffffff6f #5e6a826f #ffffff
  active_workspace    #2121216f #5e6a826f #ffffff
  inactive_workspace  #2b303b6f #2b303b6f #ffffff
  urgent_workspace    #d64e4e   #d64e4e   #ffffff
  binding_mode        #229c56   #229c56   #ffffff
}
}

# control focused window when follows the mouse movements
focus_follows_mouse no

# Autostart
exec thunderbird
exec firefox
exec ~/virtualenv/mopidy/bin/mopidy
exec nm-applet --sm-disable
exec xrdb ~/.Xresources

set $gnome-schema org.gnome.desktop.interface
exec_always {
    gsettings set $gnome-schema gtk-theme 'Windows-10-1.0.0'
    gsettings set $gnome-schema icon-theme 'Windows-10'
}

#include @sysconfdir@/sway/config.d/*
