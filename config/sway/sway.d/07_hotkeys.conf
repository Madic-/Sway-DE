# Key bindings

#####
## Launcher Dialogs
#####

## Launch // Toggle this Dialog // <><Shift> k ##
bindsym $mod+Shift+k exec $BIN_DIR/remontoire-toggle.sh

## Launch // Terminal // <> Return ##
bindsym $mod+Return exec $term

## Launch // Application Launcher // <> d ##
bindsym $mod+d exec $menu

## Launch // Command Launcher // <> b ## bemenu
bindsym $mod+b exec $BIN_DIR/bemenu-run.sh dmenu | xargs swaymsg exec

## Launch // Toggle Redshift // <><Shift> t ##
bindsym $mod+Shift+t exec pkill -USR1 redshift

## Launch // Color Picker // <> c ##
bindsym $mod+c exec $BIN_DIR/color-picker.sh

## Launch // Floating terminal // <Menu> ##
bindsym Menu exec swaymsg "[title=$criteria] scratchpad show" || alacritty -t $criteria

## Launch // Emoji Dialog // <Alt> e ##
bindsym $alt+e exec $BIN_DIR/dmenuunicode.sh insert

#####
# Screen sharing
#####

## Screen sharing // Enter screen sharing mode // <> x ##
set $mode_share "Screensharing: (s)tart; s(t)op; st(a)tus"
mode $mode_share {
    ## Screen sharing // Start screen sharing // s ##
    bindsym s exec $BIN_DIR/screenshare.sh, mode "default"
    ## Screen sharing // Stop screen sharing // t ##
    bindsym t exec $BIN_DIR/screenshare.sh stop, mode "default"
    ## Screen sharing // Check screen sharing // a ##
    bindsym a exec $BIN_DIR/screenshare.sh is-recording, mode "default"

    ## Screen sharing // Exit screen sharing mode // Escape or Enter ##
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+x mode $mode_share

#####
# Window and Workspace Navigation
#####

## Navigate // Relative Window // <> ↑ ↓ ← → ##
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

## Navigate // Workspaces 1-10 // <> 0..9 ##
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10

#####
# Window and Workspace Configuration
#####

## Modify // Window Position // <><Shift> ↑ ↓ ← → ##
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

## Modify // Move Workspace to output // <><Alt> ↑ ↓ ← → ##
bindsym $mod+Mod1+Down move workspace to output down
bindsym $mod+Mod1+Up move workspace to output up
bindsym $mod+Mod1+Left move workspace to output left
bindsym $mod+Mod1+Right move workspace to output right

## Modify // Split horizontal // <> h ##
bindsym $mod+h splith

## Modify // Split vertical // <> v ##
bindsym $mod+v splitv

## Modify // Move window to workspace 1-10 // <><Shift> 0..9 ##
bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10

## Modify // Move window to workspace 1-10; move to workspace // <><Alt> 0..9 ##
bindsym $mod+$alt+1 move container to workspace number $ws1; workspace number $ws1
bindsym $mod+$alt+2 move container to workspace number $ws2; workspace number $ws2
bindsym $mod+$alt+3 move container to workspace number $ws3; workspace number $ws3
bindsym $mod+$alt+4 move container to workspace number $ws4; workspace number $ws4
bindsym $mod+$alt+5 move container to workspace number $ws5; workspace number $ws5
bindsym $mod+$alt+6 move container to workspace number $ws6; workspace number $ws6
bindsym $mod+$alt+7 move container to workspace number $ws7; workspace number $ws7
bindsym $mod+$alt+8 move container to workspace number $ws8; workspace number $ws8
bindsym $mod+$alt+9 move container to workspace number $ws9; workspace number $ws9
bindsym $mod+$alt+0 move container to workspace number $ws10; workspace number $ws10

## Modify // Window Layout stacking // <> s ##
bindsym $mod+s layout stacking

## Modify // Window Layout tabbed // <> w ##
bindsym $mod+w layout tabbed

## Modify // Window Layout toggle split // <> e ##
bindsym $mod+e layout toggle split

## Modify // Window Fullscreen Toggle // <> f ##
bindsym $mod+f fullscreen

## Modify // Container Fullscreen Toggle // <><Shift> f ##
bindsym $mod+Shift+f focus parent; fullscreen; focus child

## Modify // Window Floating Toggle // <><Shift><Space> ##
bindsym $mod+Shift+space floating toggle

## Modify // Tile/Float Focus Toggle // <><Shift> t ##
bindsym $mod+space focus mode_toggle

## Modify // Focus parent container // <> a ##
bindsym $mod+a focus parent

#####
# Scratchpad
#####

## Scratchpad // Move window to scratchpad // <><Shift> Backspace ##
bindsym $mod+Shift+BackSpace move scratchpad

## Scratchpad // Cycle through windows in scratchpad // <> u ##
bindsym $mod+u scratchpad show

## Show specific window in scratchpad via WM_CLASS; find out with xprop
## Scratchpad // Show KeePass2 from scratchpad // <> k ##
bindsym $mod+k [class = "KeePass2"] scratchpad show

#####
# Session Management
#####

## Session // Exit application // <><Shift> q ##
bindsym $mod+Shift+q kill

## Session // Reload sway config // <><Shift> c ##
bindsym $mod+Shift+c exec swaymsg reload && systemctl --user restart kanshi

## Session // Lock screen // <> l ##
bindsym $mod+l exec $lock

#####
# System
#####

## System // Enter System Mode // <><Shift> e ##
set $lockModeName "Exit (L)ock, (R)eboot, (P)oweroff, (E)xit"
mode $lockModeName {
    ## System // Reboot // <><Shift> r ##
    bindsym $mod+Shift+r exec systemctl reboot
    ## System // Lock screen // <><Shift> l ##
    bindsym $mod+Shift+l mode "default"; $lock
    ## System // Exit sway // <><Shift> e ##
    bindsym $mod+Shift+e exec swaymsg exit
    ## System // Poweroff // <><Shift> p ##
    bindsym $mod+Shift+p exec systemctl poweroff

    ## System // Exit System Mode // Escape or Enter ##
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+Shift+e mode $lockModeName

#####
# Window Resize and Gaps
#####

## Resize // Enter Resize Mode // <> r ##
mode "Resize Mode" {
    ## Resize // Resize Window // ↑ ↓ ← → ##
    bindsym Left resize shrink width 10px
    bindsym Down resize grow height 10px
    bindsym Up resize shrink height 10px
    bindsym Right resize grow width 10px

    ## Resize // Exit Resize Mode // Escape or Enter ##
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "Resize Mode"

#####
# System Management
#####

## Modify // Monitor brightness up // <XF86MonBrightnessUp> ##
#bindsym XF86MonBrightnessUp exec light -A 5
bindsym XF86MonBrightnessUp exec lightctl raise

## Modify // Monitor brightness down // <XF86MonBrightnessDown> ##
#bindsym XF86MonBrightnessDown exec light -U 5
bindsym XF86MonBrightnessDown exec lightctl lower

# Modify // Keyboard brightness up // <XF86KbdBrightnessUp> ##
#bindsym XF86KbdBrightnessUp

# Modify // Keyboard brightness down // <XF86KbdBrightnessDown> ##
#bindsym XF86KbdBrightnessDown

## Modify // Volume up // <XF86AudioRaiseVolume> ##
#bindsym XF86AudioRaiseVolume exec pactl set-sink-volume $(pacmd list-sinks |awk '/* index:/{print $3}') +5%
bindsym XF86AudioRaiseVolume exec volumectl raise

## Modify // Volume down // <XF86AudioLowerVolume> ##
#bindsym XF86AudioLowerVolume exec pactl set-sink-volume $(pacmd list-sinks |awk '/* index:/{print $3}') -5%
bindsym XF86AudioLowerVolume exec volumectl lower

## Modify // Volume mute // <XF86AudioMute> ##
#bindsym XF86AudioMute exec pactl set-sink-mute $(pacmd list-sinks |awk '/* index:/{print $3}') toggle
bindsym XF86AudioMute exec volumectl mute

## Modify // Mic mute // <XF86AudioMicMute> ##
bindsym XF86AudioMicMute exec amixer -D pulse sset Capture toggle && notify-send -t 1000 "Microphone state toggled"

#####
# Screenshot
#####

## Screenshot // Screenshot active display // <Print> ##
#bindsym Print exec $BIN_DIR/screenshots.sh display
bindsym Print exec grim -o "$(swaymsg --type get_outputs --raw | jq -r '.[] | select(.focused) | .name')" - | swappy -f -

## Screenshot // Screenshot current window // <><Print> ##
#bindsym $mod+Print exec $BIN_DIR/screenshots.sh window
bindsym $mod+Print exec grim -g "$(swaymsg -t get_tree | jq -r '.. | select(.pid? and .visible?) | .rect | "\(.x),\(.y) \(.width)x\(.height)"')" - | swappy -f -

## Screenshot // Screenshot selected region // <><Shift><Print> ##
#bindsym $mod+Shift+Print exec $BIN_DIR/screenshots.sh region
bindsym $mod+Shift+Print exec grim -g "$(slurp -b '#AFAFAFAF' -c '#FF4F3FAF' -s '#00000000' -w 3 -d)" - | swappy -f -
